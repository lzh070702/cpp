# C++ 面向对象编程学习笔记
## 1. 类和对象基础
### 1.1 基本概念
- 类：对具有相同属性和行为的事物的抽象描述
- 对象：类的具体实例
- 类中包含：属性（成员变量）和行为（成员函数）
### 1.2 封装
>封装是将数据（属性）和操作数据的方法（行为）捆绑在一起的机制，通过访问权限控制对外暴露的接口。

三种访问权限：
- public：公有权限，类内外都可以访问
- private：私有权限，只有类内可以访问
- protected：保护权限，类内和子类可以访问
```cpp
class Person {
private:
    string name;
    int age;
    
public:
    void setName(string n) {
        name = n;
    }
    
    string getName() {
        return name;
    }
};
```
## 2. 对象的初始化和清理
### 2.1 构造函数
- 在对象创建时自动调用
- 函数名与类名相同
- 可以有参数，可以重载
- 无返回值类型
### 2.2 析构函数
- 在对象销毁前自动调用
- 函数名为~加类名
- 无参数，无返回值
- 不能重载
### 2.3 构造函数的分类
- 默认构造函数
- 有参构造函数
- 拷贝构造函数
## 3. 对象模型和this指针
### 3.1 对象模型
C++中，类的成员变量和成员函数是分开存储的：
- 非静态成员变量：属于类的对象，存储在对象中
- 静态成员变量：不属于对象，存储在全局区
- 成员函数：所有对象共享代码，存储在代码区
### 3.2 this指针
- 指向当前对象的指针
- 解决名称冲突
- 返回对象本身
```cpp
class Student {
private:
    int id;
    
public:
    Student& setID(int id) {
        this->id = id;  // 解决名称冲突
        return *this;   // 返回对象引用，支持链式调用
    }
};
```
## 4. 友元
>友元可以让一个函数或类访问另一个类的私有成员。

三种形式：
- 友元函数
- 友元类
- 友元成员函数
```cpp
class Box {
private:
    double length;
    
    friend void printLength(Box box);  // 友元函数
};
```
## 5. 运算符重载
### 5.1 基本概念
>运算符重载是对已有的运算符赋予多重含义，使其能够操作自定义的数据类型。
### 5.2 重载方式
- 成员函数重载
- 全局函数重载
### 5.3 常用运算符重载
- 算术运算符：+ - * / %
- 赋值运算符：=
- 关系运算符：> < == !=
- 自增自减：++ --
- 输入输出：>> <<
```cpp
class Complex {
private:
    double real;
    double imag;
    
public:
    Complex operator+(const Complex& c) {
        return Complex(real + c.real, imag + c.imag);
    }
};
```
## 6. 继承
### 6.1 基本概念
>继承允许创建基于现有类的新类，新类继承原有类的特性，并可以增加新的特性。
### 6.2 继承方式
- 公有继承：基类的公有和保护成员在派生类中保持原有访问权限
- 保护继承：基类的公有和保护成员在派生类中都变为保护权限
- 私有继承：基类的公有和保护成员在派生类中都变为私有权限
### 6.3 继承中的构造和析构
- 构造顺序：基类 → 成员对象 → 派生类
- 析构顺序：派生类 → 成员对象 → 基类
## 7. 多态
### 7.1 基本概念
>多态允许通过基类的指针或引用来调用派生类的方法。
### 7.2 静态多态（早绑定）
- 函数重载
- 运算符重载
- 编译时确定函数调用
### 7.3 动态多态（晚绑定）
- 通过虚函数实现
- 运行时确定函数调用
- 需要在基类中使用virtual关键字
```cpp
class Animal {
public:
    virtual void speak() {
        cout << "动物在叫" << endl;
    }
};

class Cat : public Animal {
public:
    void speak() override {
        cout << "小猫喵喵" << endl;
    }
};
```
### 7.4 纯虚函数和抽象类
- 纯虚函数：virtual 返回类型 函数名(参数列表) = 0;
- 包含纯虚函数的类称为抽象类
- 抽象类不能实例化对象
- 派生类必须实现所有纯虚函数才能实例化
## 总结要点
1. 封装：隐藏实现细节，提供安全接口
2. 继承：代码复用，提高开发效率
3. 多态：接口统一，提高代码灵活性
4. 构造函数/析构函数：对象生命周期管理
5. this指针：指向当前对象，支持链式调用
6. 运算符重载：扩展运算符功能
8. 友元：打破封装限制，谨慎使用